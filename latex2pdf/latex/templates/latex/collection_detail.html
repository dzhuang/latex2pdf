{% load i18n %}
{% load static %}

<div class="row">
    {% if collection.compile_error or unknown_error %}
        <hr>
        <div class="alert alert-danger no-mathjax">
            <h2>{% if collection.compile_error %}{% trans "Compile Error" %}{% else %}
                {% trans "Unknown Error" %}{% endif %}</h2>
            <p>
                {% if collection.compile_error %}
                    <pre>{{ collection.compile_error | safe }}</pre>
                {% else %}
                    <pre>{{ unknown_error | safe }}</pre>
                {% endif %}
            </p>
        </div>
    {% else %}
        {#  Todo: allow view history via dropdown  #}
        Hash: {{ collection.zip_file_hash }} -- {% trans "Compile time" %} {{ collection.creation_time }}
    {% endif %}
    <div class="col-lg-12">
        {% for instance in instances %}
            <hr>

            <h2>{{ instance.name }}</h2>

            <div class="embed-responsive {% if instance.is_slide %}embed-responsive-a4{% else %}embed-responsive-4by3{% endif %}">

                <iframe class='embed-responsive-item'
                        src='{% static "pdf.js/build/minified/web/viewer.html" %}?file={{instance.pdf.url}}'
                        width='90%' allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe>
            </div>

        {% endfor %}
    </div>
</div>